<odoo>
<record id="view_mgmtsystem_nonconformity_workflow_form" model="ir.ui.view">
      <field name="name">mgmtsystem.nonconformity.form</field>
      <field name="model">mgmtsystem.nonconformity</field>
      <field name="inherit_id" ref="mgmtsystem_nonconformity.view_mgmtsystem_nonconformity_form"/>
      <field name="arch" type="xml">

        <field name="stage_id" position="after">
            <button name="button_cancel" string="Cancel" states="draft,analysis,pending,open,review"/>
            <button name="button_analysis_n" string="Send for Analysis" states="draft" class="oe_highlight"/>
            <button name="button_planing_n" string="Send to Planing" states="analysis" class="oe_highlight"/>
            <button name="button_analysis_p" string="Redo Analysis" states="pending"/>
            <button name="button_open" string="Start/Open" states="pending" class="oe_highlight"/>
            <button name="button_planing_p" string="Redo Planing" states="open" class="oe_highlight"/>
            <button name="button_review_n" string="Send to Review" states="open" class="oe_highlight"/>
            <button name="button_close" string="Close" class="oe_highlight"
              states="review" groups="mgmtsystem.group_mgmtsystem_manager,mgmtsystem.group_mgmtsystem_auditor"/>
            <button name="case_reset" string="Reset to New" states="done,cancel" type="object"/>
        </field>

        <field name="immediate_action_id" position="after">
          <separator string="Nonconformity Analysis" colspan="4"/>
                <group>
                    <field name="analysis_user_id"/>
                    <field name="analysis_date"/>
                    <button name="action_sign_analysis" string="Approve" icon="fa-check" type="object" states="analysis" groups="mgmtsystem.group_mgmtsystem_manager"/>
                </group>
        </field>

        <field name="action_comments" position="after">
          <separator string="Action Plan Analysis" colspan="4"/>
                  <group>
                    <field name="actions_user_id"/>
                    <field name="actions_date"/>
                    <button name="action_sign_actions" string="Approve" icon="fa-check" type="object" states="pending" groups="mgmtsystem.group_mgmtsystem_manager"/>
                  </group>
        </field>

        <field name="evaluation_comments" position="after">
          <separator string="Effectiveness Review" colspan="4"/>
                  <group>
                    <field name="evaluation_user_id"/>
                    <field name="evaluation_date"/>
                    <button name="action_sign_evaluation" string="Sign Evaluation" icon="fa-check" type="object" states="review" groups="mgmtsystem.group_mgmtsystem_auditor"/>
                  </group>
        </field>

      </field>
    </record>

</odoo>